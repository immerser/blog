
 <!DOCTYPE HTML>
<html lang="Chinese">
<head>
  <meta charset="UTF-8">
  
    <title>你家亮哥的学习笔记</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="你家亮哥">
    

    
    <meta name="description" content="Hello world">
<meta property="og:type" content="website">
<meta property="og:title" content="你家亮哥的学习笔记">
<meta property="og:url" content="https://immerser.github.io/page/5/index.html">
<meta property="og:site_name" content="你家亮哥的学习笔记">
<meta property="og:description" content="Hello world">
<meta property="og:locale" content="Chinese">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="你家亮哥的学习笔记">
<meta name="twitter:description" content="Hello world">

    
    <link rel="alternative" href="/atom.xml" title="你家亮哥的学习笔记" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="你家亮哥的学习笔记">你家亮哥的学习笔记</a></h1>
				<h2 class="blog-motto">---notebook of cloud,dev ops,language</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:immerser.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/20/使用OPENSSL进行证书配置/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2018-01-20T15:44:39.032Z" itemprop="datePublished"> Published 2018-01-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="自签名证书配置"><a href="#自签名证书配置" class="headerlink" title="自签名证书配置"></a>自签名证书配置</h1>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/20/OAuth2官方文档阅读/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2018-01-20T15:44:38.974Z" itemprop="datePublished"> Published 2018-01-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><h2 id="Roles"><a href="#Roles" class="headerlink" title="Roles"></a>Roles</h2><ul>
<li>resource owner</li>
<li>resource server</li>
<li>client</li>
<li>authorization server<h2 id="Protocol-Flow"><a href="#Protocol-Flow" class="headerlink" title="Protocol Flow"></a>Protocol Flow</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+--------+                               +---------------+</span><br><span class="line">|        |--(A)- Authorization Request -&gt;|   Resource    |</span><br><span class="line">|        |                               |     Owner     |</span><br><span class="line">|        |&lt;-(B)-- Authorization Grant ---|               |</span><br><span class="line">|        |                               +---------------+</span><br><span class="line">|        |</span><br><span class="line">|        |                               +---------------+</span><br><span class="line">|        |--(C)-- Authorization Grant --&gt;| Authorization |</span><br><span class="line">| Client |                               |     Server    |</span><br><span class="line">|        |&lt;-(D)----- Access Token -------|               |</span><br><span class="line">|        |                               +---------------+</span><br><span class="line">|        |</span><br><span class="line">|        |                               +---------------+</span><br><span class="line">|        |--(E)----- Access Token ------&gt;|    Resource   |</span><br><span class="line">|        |                               |     Server    |</span><br><span class="line">|        |&lt;-(F)--- Protected Resource ---|               |</span><br><span class="line">+--------+                               +---------------+</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Authorization-Grant"><a href="#Authorization-Grant" class="headerlink" title="Authorization Grant"></a>Authorization Grant</h2><h4 id="Authorization-Code"><a href="#Authorization-Code" class="headerlink" title="Authorization Code"></a>Authorization Code</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="Implicit"><a href="#Implicit" class="headerlink" title="Implicit"></a>Implicit</h4><h4 id="Resource-Owner-Password-Credentials"><a href="#Resource-Owner-Password-Credentials" class="headerlink" title="Resource Owner Password Credentials"></a>Resource Owner Password Credentials</h4><h4 id="Client-Credentials"><a href="#Client-Credentials" class="headerlink" title="Client Credentials"></a>Client Credentials</h4><h2 id="Access-Token"><a href="#Access-Token" class="headerlink" title="Access Token"></a>Access Token</h2><h2 id="Refresh-Token"><a href="#Refresh-Token" class="headerlink" title="Refresh Token"></a>Refresh Token</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+--------+                                           +---------------+</span><br><span class="line">|        |--(A)------- Authorization Grant ---------&gt;|               |</span><br><span class="line">|        |                                           |               |</span><br><span class="line">|        |&lt;-(B)----------- Access Token -------------|               |</span><br><span class="line">|        |               &amp; Refresh Token             |               |</span><br><span class="line">|        |                                           |               |</span><br><span class="line">|        |                            +----------+   |               |</span><br><span class="line">|        |--(C)---- Access Token ----&gt;|          |   |               |</span><br><span class="line">|        |                            |          |   |               |</span><br><span class="line">|        |&lt;-(D)- Protected Resource --| Resource |   | Authorization |</span><br><span class="line">| Client |                            |  Server  |   |     Server    |</span><br><span class="line">|        |--(E)---- Access Token ----&gt;|          |   |               |</span><br><span class="line">|        |                            |          |   |               |</span><br><span class="line">|        |&lt;-(F)- Invalid Token Error -|          |   |               |</span><br><span class="line">|        |                            +----------+   |               |</span><br><span class="line">|        |                                           |               |</span><br><span class="line">|        |--(G)----------- Refresh Token -----------&gt;|               |</span><br><span class="line">|        |                                           |               |</span><br><span class="line">|        |&lt;-(H)----------- Access Token -------------|               |</span><br><span class="line">+--------+           &amp; Optional Refresh Token        +---------------+</span><br></pre></td></tr></table></figure>
<h3 id="TLS-Version"><a href="#TLS-Version" class="headerlink" title="TLS Version"></a>TLS Version</h3><h3 id="HTTP-Redirections"><a href="#HTTP-Redirections" class="headerlink" title="HTTP Redirections"></a>HTTP Redirections</h3><h3 id="Interoperability"><a href="#Interoperability" class="headerlink" title="Interoperability"></a>Interoperability</h3><h3 id="Notational-Conventions"><a href="#Notational-Conventions" class="headerlink" title="Notational Conventions"></a>Notational Conventions</h3><h2 id="Client-Registration"><a href="#Client-Registration" class="headerlink" title="Client Registration"></a>Client Registration</h2><h3 id="Client-Types"><a href="#Client-Types" class="headerlink" title="Client Types"></a>Client Types</h3><h3 id="Client-Identifier"><a href="#Client-Identifier" class="headerlink" title="Client Identifier"></a>Client Identifier</h3><h3 id="Client-Authentication"><a href="#Client-Authentication" class="headerlink" title="Client Authentication"></a>Client Authentication</h3><h4 id="Client-Password"><a href="#Client-Password" class="headerlink" title="Client Password"></a>Client Password</h4><h3 id="Other-Authentication-Methods"><a href="#Other-Authentication-Methods" class="headerlink" title="Other Authentication Methods"></a>Other Authentication Methods</h3><h3 id="Unregistered-Clients"><a href="#Unregistered-Clients" class="headerlink" title="Unregistered Clients"></a>Unregistered Clients</h3><h2 id="Protocol-Endpoints"><a href="#Protocol-Endpoints" class="headerlink" title="Protocol Endpoints"></a>Protocol Endpoints</h2><h3 id="Authorization-Endpoint"><a href="#Authorization-Endpoint" class="headerlink" title="Authorization Endpoint"></a>Authorization Endpoint</h3><h4 id="Response-Type"><a href="#Response-Type" class="headerlink" title="Response Type"></a>Response Type</h4><h4 id="Redirection-Endpoint"><a href="#Redirection-Endpoint" class="headerlink" title="Redirection Endpoint"></a>Redirection Endpoint</h4><h3 id="Token-Endpoint"><a href="#Token-Endpoint" class="headerlink" title="Token Endpoint"></a>Token Endpoint</h3><h4 id="Client-Authentication-1"><a href="#Client-Authentication-1" class="headerlink" title="Client Authentication"></a>Client Authentication</h4><h3 id="Access-Token-Scope"><a href="#Access-Token-Scope" class="headerlink" title="Access Token Scope"></a>Access Token Scope</h3><h1 id="Obtaining-Authorization"><a href="#Obtaining-Authorization" class="headerlink" title="Obtaining Authorization"></a>Obtaining Authorization</h1><h2 id="Authorization-Code-Grant"><a href="#Authorization-Code-Grant" class="headerlink" title="Authorization Code Grant"></a>Authorization Code Grant</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| Resource |</span><br><span class="line">|   Owner  |</span><br><span class="line">|          |</span><br><span class="line">+----------+</span><br><span class="line">     ^</span><br><span class="line">     |</span><br><span class="line">    (B)</span><br><span class="line">+----|-----+          Client Identifier      +---------------+</span><br><span class="line">|         -+----(A)-- &amp; Redirection URI ----&gt;|               |</span><br><span class="line">|  User-   |                                 | Authorization |</span><br><span class="line">|  Agent  -+----(B)-- User authenticates ---&gt;|     Server    |</span><br><span class="line">|          |                                 |               |</span><br><span class="line">|         -+----(C)-- Authorization Code ---&lt;|               |</span><br><span class="line">+-|----|---+                                 +---------------+</span><br><span class="line">  |    |                                         ^      v</span><br><span class="line"> (A)  (C)                                        |      |</span><br><span class="line">  |    |                                         |      |</span><br><span class="line">  ^    v                                         |      |</span><br><span class="line">+---------+                                      |      |</span><br><span class="line">|         |&gt;---(D)-- Authorization Code ---------&apos;      |</span><br><span class="line">|  Client |          &amp; Redirection URI                  |</span><br><span class="line">|         |                                             |</span><br><span class="line">|         |&lt;---(E)----- Access Token -------------------&apos;</span><br><span class="line">+---------+       (w/ Optional Refresh Token)</span><br></pre></td></tr></table></figure>
<h3 id="Authorization-Request-…………………………25"><a href="#Authorization-Request-…………………………25" class="headerlink" title="Authorization Request …………………………25"></a>Authorization Request …………………………25</h3><h3 id="Authorization-Response-………………………-26"><a href="#Authorization-Response-………………………-26" class="headerlink" title="Authorization Response ………………………..26"></a>Authorization Response ………………………..26</h3><h3 id="Access-Token-Request-…………………………-29"><a href="#Access-Token-Request-…………………………-29" class="headerlink" title="Access Token Request ………………………….29"></a>Access Token Request ………………………….29</h3><h3 id="Access-Token-Response-…………………………30"><a href="#Access-Token-Response-…………………………30" class="headerlink" title="Access Token Response …………………………30"></a>Access Token Response …………………………30</h3><h2 id="Implicit-Grant"><a href="#Implicit-Grant" class="headerlink" title="Implicit Grant"></a>Implicit Grant</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| Resource |</span><br><span class="line">|  Owner   |</span><br><span class="line">|          |</span><br><span class="line">+----------+</span><br><span class="line">     ^</span><br><span class="line">     |</span><br><span class="line">    (B)</span><br><span class="line">+----|-----+          Client Identifier     +---------------+</span><br><span class="line">|         -+----(A)-- &amp; Redirection URI ---&gt;|               |</span><br><span class="line">|  User-   |                                | Authorization |</span><br><span class="line">|  Agent  -|----(B)-- User authenticates --&gt;|     Server    |</span><br><span class="line">|          |                                |               |</span><br><span class="line">|          |&lt;---(C)--- Redirection URI ----&lt;|               |</span><br><span class="line">|          |          with Access Token     +---------------+</span><br><span class="line">|          |            in Fragment</span><br><span class="line">|          |                                +---------------+</span><br><span class="line">|          |----(D)--- Redirection URI ----&gt;|   Web-Hosted  |</span><br><span class="line">|          |          without Fragment      |     Client    |</span><br><span class="line">|          |                                |    Resource   |</span><br><span class="line">|     (F)  |&lt;---(E)------- Script ---------&lt;|               |</span><br><span class="line">|          |                                +---------------+</span><br><span class="line">+-|--------+</span><br><span class="line">  |    |</span><br><span class="line"> (A)  (G) Access Token</span><br><span class="line">  |    |</span><br><span class="line">  ^    v</span><br><span class="line">+---------+</span><br><span class="line">|         |</span><br><span class="line">|  Client |</span><br><span class="line">|         |</span><br><span class="line">+---------+</span><br></pre></td></tr></table></figure>
<h3 id="Authorization-Request-…………………………33"><a href="#Authorization-Request-…………………………33" class="headerlink" title="Authorization Request …………………………33"></a>Authorization Request …………………………33</h3><h3 id="Access-Token-Response-…………………………35"><a href="#Access-Token-Response-…………………………35" class="headerlink" title="Access Token Response …………………………35"></a>Access Token Response …………………………35</h3><h2 id="Resource-Owner-Password-Credentials-Grant"><a href="#Resource-Owner-Password-Credentials-Grant" class="headerlink" title="Resource Owner Password Credentials Grant"></a>Resource Owner Password Credentials Grant</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| Resource |</span><br><span class="line">|  Owner   |</span><br><span class="line">|          |</span><br><span class="line">+----------+</span><br><span class="line">     v</span><br><span class="line">     |    Resource Owner</span><br><span class="line">    (A) Password Credentials</span><br><span class="line">     |</span><br><span class="line">     v</span><br><span class="line">+---------+                                  +---------------+</span><br><span class="line">|         |&gt;--(B)---- Resource Owner -------&gt;|               |</span><br><span class="line">|         |         Password Credentials     | Authorization |</span><br><span class="line">| Client  |                                  |     Server    |</span><br><span class="line">|         |&lt;--(C)---- Access Token ---------&lt;|               |</span><br><span class="line">|         |    (w/ Optional Refresh Token)   |               |</span><br><span class="line">+---------+                                  +---------------+</span><br></pre></td></tr></table></figure>
<h3 id="uthorization-Request-and-Response"><a href="#uthorization-Request-and-Response" class="headerlink" title="uthorization Request and Response"></a>uthorization Request and Response</h3><h3 id="Access-Token-Request"><a href="#Access-Token-Request" class="headerlink" title="Access Token Request"></a>Access Token Request</h3><h3 id="Access-Token-Response"><a href="#Access-Token-Response" class="headerlink" title="Access Token Response"></a>Access Token Response</h3><h2 id="Client-Credentials-Grant"><a href="#Client-Credentials-Grant" class="headerlink" title="Client Credentials Grant"></a>Client Credentials Grant</h2><h3 id="Authorization-Request-and-Response"><a href="#Authorization-Request-and-Response" class="headerlink" title="Authorization Request and Response"></a>Authorization Request and Response</h3><h3 id="Access-Token-Request-1"><a href="#Access-Token-Request-1" class="headerlink" title="Access Token Request"></a>Access Token Request</h3><h3 id="Access-Token-Response-1"><a href="#Access-Token-Response-1" class="headerlink" title="Access Token Response"></a>Access Token Response</h3><h3 id="Extension-Grants"><a href="#Extension-Grants" class="headerlink" title="Extension Grants"></a>Extension Grants</h3><h3 id="Issuing-an-Access-Token"><a href="#Issuing-an-Access-Token" class="headerlink" title="Issuing an Access Token"></a>Issuing an Access Token</h3><h3 id="Successful-Response"><a href="#Successful-Response" class="headerlink" title="Successful Response"></a>Successful Response</h3><h3 id="Error-Response"><a href="#Error-Response" class="headerlink" title="Error Response"></a>Error Response</h3><h2 id="Refreshing-an-Access-Token"><a href="#Refreshing-an-Access-Token" class="headerlink" title="Refreshing an Access Token"></a>Refreshing an Access Token</h2><h2 id="Accessing-Protected-Resources"><a href="#Accessing-Protected-Resources" class="headerlink" title="Accessing Protected Resources"></a>Accessing Protected Resources</h2><h3 id="Access-Token-Types"><a href="#Access-Token-Types" class="headerlink" title="Access Token Types"></a>Access Token Types</h3><h3 id="Error-Response-1"><a href="#Error-Response-1" class="headerlink" title="Error Response"></a>Error Response</h3><h2 id="Extensibility"><a href="#Extensibility" class="headerlink" title="Extensibility"></a>Extensibility</h2><h3 id="Defining-Access-Token-Types"><a href="#Defining-Access-Token-Types" class="headerlink" title="Defining Access Token Types"></a>Defining Access Token Types</h3><h3 id="Defining-New-Endpoint-Parameters"><a href="#Defining-New-Endpoint-Parameters" class="headerlink" title="Defining New Endpoint Parameters"></a>Defining New Endpoint Parameters</h3><h3 id="Defining-New-Authorization-Grant-Types"><a href="#Defining-New-Authorization-Grant-Types" class="headerlink" title="Defining New Authorization Grant Types"></a>Defining New Authorization Grant Types</h3><h3 id="Defining-New-Authorization-Endpoint-Response-Types"><a href="#Defining-New-Authorization-Endpoint-Response-Types" class="headerlink" title="Defining New Authorization Endpoint Response Types"></a>Defining New Authorization Endpoint Response Types</h3><h3 id="Defining-Additional-Error-Codes"><a href="#Defining-Additional-Error-Codes" class="headerlink" title="Defining Additional Error Codes"></a>Defining Additional Error Codes</h3><h2 id="Native-Applications"><a href="#Native-Applications" class="headerlink" title="Native Applications"></a>Native Applications</h2><h2 id="Security-Considerations"><a href="#Security-Considerations" class="headerlink" title="Security Considerations"></a>Security Considerations</h2><h3 id="Client-Authentication-2"><a href="#Client-Authentication-2" class="headerlink" title="Client Authentication"></a>Client Authentication</h3><h3 id="Client-Impersonation"><a href="#Client-Impersonation" class="headerlink" title="Client Impersonation"></a>Client Impersonation</h3><h3 id="Access-Tokens"><a href="#Access-Tokens" class="headerlink" title="Access Tokens"></a>Access Tokens</h3><h3 id="Refresh-Tokens"><a href="#Refresh-Tokens" class="headerlink" title="Refresh Tokens"></a>Refresh Tokens</h3><h3 id="Authorization-Codes"><a href="#Authorization-Codes" class="headerlink" title="Authorization Codes"></a>Authorization Codes</h3><h3 id="Authorization-Code-Redirection-URI-Manipulation"><a href="#Authorization-Code-Redirection-URI-Manipulation" class="headerlink" title="Authorization Code Redirection URI Manipulation"></a>Authorization Code Redirection URI Manipulation</h3><h3 id="Resource-Owner-Password-Credentials-1"><a href="#Resource-Owner-Password-Credentials-1" class="headerlink" title="Resource Owner Password Credentials"></a>Resource Owner Password Credentials</h3><h3 id="Request-Confidentiality"><a href="#Request-Confidentiality" class="headerlink" title="Request Confidentiality"></a>Request Confidentiality</h3><h3 id="Ensuring-Endpoint-Authenticity"><a href="#Ensuring-Endpoint-Authenticity" class="headerlink" title="Ensuring Endpoint Authenticity"></a>Ensuring Endpoint Authenticity</h3><h3 id="Credentials-Guessing-Attacks"><a href="#Credentials-Guessing-Attacks" class="headerlink" title="Credentials-Guessing Attacks"></a>Credentials-Guessing Attacks</h3><h3 id="Phishing-Attacks"><a href="#Phishing-Attacks" class="headerlink" title="Phishing Attacks"></a>Phishing Attacks</h3><h3 id="Cross-Site-Request-Forgery"><a href="#Cross-Site-Request-Forgery" class="headerlink" title="Cross-Site Request Forgery"></a>Cross-Site Request Forgery</h3><h3 id="Clickjacking"><a href="#Clickjacking" class="headerlink" title="Clickjacking"></a>Clickjacking</h3><h3 id="Code-Injection-and-Input-Validation"><a href="#Code-Injection-and-Input-Validation" class="headerlink" title="Code Injection and Input Validation"></a>Code Injection and Input Validation</h3><h3 id="Open-Redirectors"><a href="#Open-Redirectors" class="headerlink" title="Open Redirectors"></a>Open Redirectors</h3><h3 id="Misuse-of-Access-Token-to-Impersonate-Resource-Owner-in-Implicit-Flow"><a href="#Misuse-of-Access-Token-to-Impersonate-Resource-Owner-in-Implicit-Flow" class="headerlink" title="Misuse of Access Token to Impersonate Resource Owner in Implicit Flow"></a>Misuse of Access Token to Impersonate Resource Owner in Implicit Flow</h3><h2 id="IANA-Considerations-……………………………………-62"><a href="#IANA-Considerations-……………………………………-62" class="headerlink" title="IANA Considerations …………………………………….62"></a>IANA Considerations …………………………………….62</h2><pre><code>11.1. OAuth Access Token Types Registry ........................62
     11.1.1. Registration Template .............................62
11.2. OAuth Parameters Registry ................................63
     11.2.1. Registration Template .............................63
     11.2.2. Initial Registry Contents .........................64
11.3. OAuth Authorization Endpoint Response Types Registry .....66
     11.3.1. Registration Template .............................66
     11.3.2. Initial Registry Contents .........................67
11.4. OAuth Extensions Error Registry ..........................67
     11.4.1. Registration Template .............................68
</code></pre><ol>
<li>References …………………………………………….68<br>12.1. Normative References ……………………………….68<br>12.2. Informative References ……………………………..70<h1 id="Appendix-A-Augmented-Backus-Naur-Form-ABNF-Syntax-…………-71"><a href="#Appendix-A-Augmented-Backus-Naur-Form-ABNF-Syntax-…………-71" class="headerlink" title="Appendix A. Augmented Backus-Naur Form (ABNF) Syntax …………..71"></a>Appendix A. Augmented Backus-Naur Form (ABNF) Syntax …………..71</h1>A.1.  “client_id” Syntax ………………………………….71<br>A.2.  “client_secret” Syntax ………………………………71<br>A.3.  “response_type” Syntax ………………………………71<br>A.4.  “scope” Syntax ……………………………………..72<br>A.5.  “state” Syntax ……………………………………..72<br>A.6.  “redirect_uri” Syntax ……………………………….72<br>A.7.  “error” Syntax ……………………………………..72<br>A.8.  “error_description” Syntax …………………………..72<br>A.9.  “error_uri” Syntax ………………………………….72<br>A.10. “grant_type” Syntax …………………………………73<br>A.11. “code” Syntax ………………………………………73<br>A.12. “access_token” Syntax ……………………………….73<br>A.13. “token_type” Syntax …………………………………73<br>A.14. “expires_in” Syntax …………………………………73<br>A.15. “username” Syntax …………………………………..73<br>A.16. “password” Syntax …………………………………..73<br>A.17. “refresh_token” Syntax ………………………………74<br>A.18. Endpoint Parameter Syntax ……………………………74<br>Appendix B. Use of application/x-www-form-urlencoded Media Type …74<br>Appendix C. Acknowledgements ………………………………..75</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/20/spring_cloud_doc/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2018-01-20T15:44:38.974Z" itemprop="datePublished"> Published 2018-01-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="ZUUL"><a href="#ZUUL" class="headerlink" title="ZUUL"></a>ZUUL</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li>Authentication</li>
<li>Insights</li>
<li>Stress Testing</li>
<li>Canary Testing</li>
<li>Dynamic Routing</li>
<li>Service Migration</li>
<li>Load Shedding</li>
<li>Security</li>
<li>Static Response handling</li>
<li>Active/Active traffic management</li>
</ul>
<h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring-cloud-starter-netflix-zuul</span><br></pre></td></tr></table></figure>
<h3 id="Zuul-Reverse-Proxy"><a href="#Zuul-Reverse-Proxy" class="headerlink" title="Zuul Reverse Proxy"></a>Zuul Reverse Proxy</h3><blockquote>
<p>  通过内嵌 Zuul proxy 使得前端系统调用系统服务更加方便,避免了跨域和权限问题<br>  通过添加<code>@EnableZuulProxy</code>启动内嵌的zuul proxy<br>  使用<code>Ribbon</code>定位后端服务<br>  通过<code>hystrix command</code>执行<br>  通过<code>PatternServiceRouteMapper</code>自定义路由映射<br>  默认带有重试功能可以通过配置<code>Ribbon</code>取消重试<br>  默认<code>zuul.addProxyHeaders=true</code>添加Http header <code>X-Forwarded-Host</code></p>
</blockquote>
<h3 id="Zuul-Http-Client"><a href="#Zuul-Http-Client" class="headerlink" title="Zuul Http Client"></a>Zuul Http Client</h3><blockquote>
<p>  默认使用 Apache HTTP Client作为http 调用client<br>  通过定制<code>ClosableHttpClient</code> 或 <code>OkHttpClient</code>来定制http client</p>
</blockquote>
<h3 id="Cookies-and-Sensitive-Headers"><a href="#Cookies-and-Sensitive-Headers" class="headerlink" title="Cookies and Sensitive Headers"></a>Cookies and Sensitive Headers</h3><blockquote>
<p>  通过配置<code>sensitiveHeaders</code>来路由http头 默认为<code>Cookie,Set-Cookie,Authorization</code><br>  <code>sensitiveHeaders</code>为黑名单模式<br>  <code>sensitiveHeaders</code>可全局或者按照服务去配置</p>
</blockquote>
<h3 id="Ignored-Headers"><a href="#Ignored-Headers" class="headerlink" title="Ignored Headers"></a>Ignored Headers</h3><blockquote>
<p>  zuul.ignoredHeaders配置来忽略某些header</p>
</blockquote>
<h3 id="Management-Endpoints"><a href="#Management-Endpoints" class="headerlink" title="Management Endpoints"></a>Management Endpoints</h3><blockquote>
<p>  <code>@EnableZuulProxy</code>添加了两个额外的endpoint <code>Routes</code>,<code>Routes</code></p>
</blockquote>
<h3 id="Strangulation-Patterns-and-Local-Forwards"><a href="#Strangulation-Patterns-and-Local-Forwards" class="headerlink" title="Strangulation Patterns and Local Forwards"></a>Strangulation Patterns and Local Forwards</h3><h3 id="Uploading-Files-through-Zuul"><a href="#Uploading-Files-through-Zuul" class="headerlink" title="Uploading Files through Zuul"></a>Uploading Files through Zuul</h3><blockquote>
<p>  默认允许上传小文件<br>  通过zuul.routes.customers设置Multi part file<br>  主要要同时设置<code>hystrix</code>和<code>ribbon</code>的超时时间</p>
</blockquote>
<h3 id="Query-String-Encoding"><a href="#Query-String-Encoding" class="headerlink" title="Query String Encoding"></a>Query String Encoding</h3><blockquote>
<p>  zuul内部会对<code>query params</code>先解码再进行处理后再编码,可能导致和最先的请求不一致<br>  通过设置<code>forceOriginalQueryStringEncoding: true</code>来强制保持一致,只在<code>SimpleHostRoutingFilter</code>模式生效</p>
</blockquote>
<h3 id="Plain-Embedded-Zuul"><a href="#Plain-Embedded-Zuul" class="headerlink" title="Plain Embedded Zuul"></a>Plain Embedded Zuul</h3><blockquote>
<p>  使用@EnableZuulServer启动zuul服务,此服务不含proxy</p>
</blockquote>
<h3 id="Disable-Zuul-Filters"><a href="#Disable-Zuul-Filters" class="headerlink" title="Disable Zuul Filters"></a>Disable Zuul Filters</h3><blockquote>
<p>  默认zuul会使用一系列filter来进行请求拦截<br>  通过配置<code>zuul.SendResponseFilter.post.disable=true</code>来关闭某一拦截</p>
</blockquote>
<h3 id="Providing-Hystrix-Fallbacks-For-Routes"><a href="#Providing-Hystrix-Fallbacks-For-Routes" class="headerlink" title="Providing Hystrix Fallbacks For Routes"></a>Providing Hystrix Fallbacks For Routes</h3><blockquote>
<p>  通过自定义<code>ZuulFallbackProvider</code>来生成fallback后的定制信息</p>
</blockquote>
<h3 id="Zuul-Timeouts"><a href="#Zuul-Timeouts" class="headerlink" title="Zuul Timeouts"></a>Zuul Timeouts</h3><blockquote>
<p>  配置超时时间根绝zuul的配置有不同的选择<br>  如果使用服务发现 通过配置<code>ribbon.ReadTimeout</code>和<code>ribbon.SocketTimeout</code>设置<br>  如果通过url 通过配置<code>zuul.host.connect-timeout-millis</code>和<code>zuul.host.socket-timeout-millis</code>设置</p>
</blockquote>
<h3 id="Rewriting-Location-header"><a href="#Rewriting-Location-header" class="headerlink" title="Rewriting Location header"></a>Rewriting Location header</h3><blockquote>
<p>  通过配置bean <code>LocationRewriteFilter</code>启用重定向</p>
<h3 id="Zuul-Developer-Guide"><a href="#Zuul-Developer-Guide" class="headerlink" title="Zuul Developer Guide"></a>Zuul Developer Guide</h3><ol>
<li>Servlet</li>
<li>RequestContext</li>
<li>@EnableZuulServer Filters</li>
</ol>
</blockquote>
<pre><code>*   ServletDetectionFilter
*   FormBodyWrapperFilter
*   DebugFilter

*   SendForwardFilter
*   SendResponseFilter

*   SendErrorFilter
</code></pre><ol>
<li>@EnableZuulProxy<ul>
<li>PreDecorationFilter</li>
<li>RibbonRoutingFilter</li>
<li>SimpleHostRoutingFilter</li>
</ul>
</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/20/test/" title="test" itemprop="url">test</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2018-01-20T09:02:16.000Z" itemprop="datePublished"> Published 2018-01-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/20/hello-world/" title="Hello World" itemprop="url">Hello World</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2018-01-20T08:11:42.968Z" itemprop="datePublished"> Published 2018-01-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/01/dockerfile的使用说明/" title="docker file教程   --- 官方文档笔记" itemprop="url">docker file教程   --- 官方文档笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2017-11-01T12:10:33.000Z" itemprop="datePublished"> Published 2017-11-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker bulid .</span><br><span class="line">docker build -f /path/aa/Dockerfile</span><br><span class="line">docker build -t lance/lance_docker .</span><br><span class="line">docker build -t lance/lance_docker:1.0 -t lance/lance_docker:latest .</span><br></pre></td></tr></table></figure>
<p>YAML 模板文件语法</p>
<pre><code>默认的模板文件是 docker-compose.yml，其中定义的每个服务都必须通过 image 指令指定镜像或 build 指令（需要 Dockerfile）来自动构建。
其它大部分指令都跟 docker run 中的类似。
如果使用 build 指令，在 Dockerfile 中设置的选项(例如：CMD, EXPOSE, VOLUME, ENV 等) 将会自动被获取，无需在 docker-compose.yml 中再次设置。
image
指定为镜像名称或镜像 ID。如果镜像在本地不存在，Compose 将会尝试拉去这个镜像。
例如：
</code></pre><p>image: ubuntu<br>image: orchardup/postgresql<br>image: a4bc65fd</p>
<p>build<br>指定 Dockerfile 所在文件夹的路径。 Compose 将会利用它自动构建这个镜像，然后使用这个镜像。<br>build: /path/to/build/dir</p>
<p>command<br>覆盖容器启动后默认执行的命令。<br>command: bundle exec thin -p 3000</p>
<p>links<br>链接到其它服务中的容器。使用服务名称（同时作为别名）或服务名称：服务别名 （SERVICE:ALIAS） 格式都可以。<br>links:</p>
<ul>
<li>db</li>
<li>db:database</li>
<li>redis<br>使用的别名将会自动在服务容器中的 /etc/hosts 里创建。例如：<br>172.17.2.186 db<br>相应的环境变量也将被创建。</li>
</ul>
<p>external_links<br>链接到 docker-compose.yml 外部的容器，甚至 并非 Compose 管理的容器。参数格式跟 links 类似。<br>external_links:</p>
<ul>
<li>redis_1</li>
<li>project_db_1:mysql</li>
<li>project_db_1:postgresql</li>
</ul>
<p>ports<br>暴露端口信息。<br>使用宿主：容器 （HOST:CONTAINER）格式或者仅仅指定容器的端口（宿主将会随机选择端口）都可以。<br>ports:</p>
<pre><code>- &quot;3000&quot;
- &quot;8000:8000&quot;
- &quot;127.0.0.1:8001:8001&quot;
</code></pre><p>注：当使用 HOST:CONTAINER 格式来映射端口时，如果你使用的容器端口小于 60 你可能会得到错误得结果，因为 YAML 将会解析 xx:yy 这种数字格式为 60 进制。所以建议采用字符串格式。</p>
<p>expose<br>暴露端口，但不映射到宿主机，只被连接的服务访问。<br>仅可以指定内部端口为参数<br>expose:</p>
<ul>
<li>“3000”</li>
<li>“8000”</li>
</ul>
<p>volumes<br>卷挂载路径设置。可以设置宿主机路径 （HOST:CONTAINER） 或加上访问模式 （HOST:CONTAINER:ro）。<br>volumes:</p>
<ul>
<li>/var/lib/mysql</li>
<li>cache/:/tmp/cache</li>
<li>~/configs:/etc/configs/:ro</li>
</ul>
<p>volumes_from<br>从另一个服务或容器挂载它的所有卷。<br>volumes_from:</p>
<ul>
<li>service_name</li>
<li>container_name</li>
</ul>
<p>environment<br>设置环境变量。你可以使用数组或字典两种格式。<br>只给定名称的变量会自动获取它在 Compose 主机上的值，可以用来防止泄露不必要的数据。<br>environment:</p>
<ul>
<li>RACK_ENV=development</li>
<li>SESSION_SECRET</li>
</ul>
<p>env_file<br>从文件中获取环境变量，可以为单独的文件路径或列表。<br>如果通过 docker-compose -f FILE 指定了模板文件，则 env_file 中路径会基于模板文件路径。<br>如果有变量名称与 environment 指令冲突，则以后者为准。<br>env_file: .env<br>env_file:</p>
<ul>
<li>./common.env</li>
<li>./apps/web.env</li>
<li>/opt/secrets.env<br>环境变量文件中每一行必须符合格式，支持 # 开头的注释行。<h1 id="common-env-Set-Rails-Rack-environment"><a href="#common-env-Set-Rails-Rack-environment" class="headerlink" title="common.env: Set Rails/Rack environment"></a>common.env: Set Rails/Rack environment</h1>RACK_ENV=development</li>
</ul>
<p>extends<br>基于已有的服务进行扩展。例如我们已经有了一个 webapp 服务，模板文件为 common.yml。</p>
<h1 id="common-yml"><a href="#common-yml" class="headerlink" title="common.yml"></a>common.yml</h1><p>webapp:<br>build: ./webapp<br>environment:<br>\ - DEBUG=false<br>\ - SEND_EMAILS=false</p>
<p>编写一个新的 development.yml 文件，使用 common.yml 中的 webapp 服务进行扩展。<br>development.yml<br>web:<br>extends:<br>file: common.yml<br>service: webapp<br>ports:<br>\ - “8000:8000”<br>links:<br>\ - db<br>environment:</p>
<ul>
<li>DEBUG=true<br>db:<br>image: postgres<br>后者会自动继承 common.yml 中的 webapp 服务及相关环节变量。</li>
</ul>
<p>net<br>设置网络模式。使用和 docker client 的 –net 参数一样的值。<br>net: “bridge”<br>net: “none”<br>net: “container:[name or id]”<br>net: “host”</p>
<p>pid<br>跟主机系统共享进程命名空间。打开该选项的容器可以相互通过进程 ID 来访问和操作。<br>pid: “host”</p>
<p>dns<br>配置 DNS 服务器。可以是一个值，也可以是一个列表。<br>dns: 8.8.8.8<br>dns:</p>
<ul>
<li>8.8.8.8</li>
<li>9.9.9.9</li>
</ul>
<p>cap_add, cap_drop<br>添加或放弃容器的 Linux 能力（Capabiliity）。<br>cap_add:</p>
<ul>
<li>ALL<br>cap_drop:</li>
<li>NET_ADMIN</li>
<li>SYS_ADMIN</li>
</ul>
<p>dns_search<br>配置 DNS 搜索域。可以是一个值，也可以是一个列表。<br>dns_search: example.com<br>dns_search:</p>
<ul>
<li>domain1.example.com<br>\ - domain2.example.com<br>working_dir, entrypoint, user, hostname, domainname, mem_limit, privileged, restart, stdin_open, tty, cpu_shares<br>这些都是和 docker run 支持的选项类似。<br>cpu_shares: 73<br>working_dir: /code<br>entrypoint: /code/entrypoint.sh<br>user: postgresql<br>hostname: foo<br>domainname: foo.com<br>mem_limit: 1000000000<br>privileged: true<br>restart: always<br>stdin_open: true<br>tty: true</li>
</ul>
<table>
<thead>
<tr>
<th>header 1</th>
<th>header 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>row 1 col 1</td>
<td>row 1 col 2</td>
</tr>
<tr>
<td>row 2 col 1</td>
<td>row 2 col 2</td>
</tr>
</tbody>
</table>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/tools/">tools</a>►<a class="article-category-link" href="/categories/tools/cloud/">cloud</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/dev-ops/">dev ops</a><a href="/tags/docker/">docker</a><a href="/tags/dockerfile/">dockerfile</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/01/spring_cloud/" title="spring cloud教程   --- 官方文档笔记" itemprop="url">spring cloud教程   --- 官方文档笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2017-11-01T12:10:33.000Z" itemprop="datePublished"> Published 2017-11-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="spring-cloud-微服务"><a href="#spring-cloud-微服务" class="headerlink" title="spring cloud   微服务"></a>spring cloud   微服务</h1><h2 id="spring-cloud-config"><a href="#spring-cloud-config" class="headerlink" title="spring cloud config"></a>spring cloud config</h2><h2 id="spring-cloud-netflix"><a href="#spring-cloud-netflix" class="headerlink" title="spring cloud netflix"></a>spring cloud netflix</h2><h2 id="spring-cloud-stream"><a href="#spring-cloud-stream" class="headerlink" title="spring cloud stream"></a>spring cloud stream</h2><h2 id="spring-cloud-bus"><a href="#spring-cloud-bus" class="headerlink" title="spring cloud bus"></a>spring cloud bus</h2><h2 id="spring-cloud-sleuth"><a href="#spring-cloud-sleuth" class="headerlink" title="spring cloud sleuth"></a>spring cloud sleuth</h2><h2 id="spring-cloud-consul"><a href="#spring-cloud-consul" class="headerlink" title="spring cloud consul"></a>spring cloud consul</h2><h2 id="spring-cloud-zookeeper"><a href="#spring-cloud-zookeeper" class="headerlink" title="spring cloud zookeeper"></a>spring cloud zookeeper</h2><h2 id="spring-boot-cloud-CLI"><a href="#spring-boot-cloud-CLI" class="headerlink" title="spring boot cloud CLI"></a>spring boot cloud CLI</h2><h2 id="spring-cloud-security"><a href="#spring-cloud-security" class="headerlink" title="spring cloud security"></a>spring cloud security</h2><h2 id="spring-cloud-for-cloud-foundary"><a href="#spring-cloud-for-cloud-foundary" class="headerlink" title="spring cloud for cloud foundary"></a>spring cloud for cloud foundary</h2><h2 id="spring-cloud-cluster"><a href="#spring-cloud-cluster" class="headerlink" title="spring cloud cluster"></a>spring cloud cluster</h2><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><table>
<thead>
<tr>
<th>Component</th>
<th>Angel.SR6</th>
<th>Brixton.SR5</th>
<th>Camden.M1</th>
<th>Camden.BUILD-SNAPSHOT</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-cloud-aws</td>
<td>1.0.4.RELEASE</td>
<td>1.1.1.RELEASE</td>
<td>1.1.1.RELEASE</td>
<td>1.1.2.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-bus</td>
<td>1.0.3.RELEASE</td>
<td>1.1.1.RELEASE</td>
<td>1.2.0.M1</td>
<td>1.2.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-cli</td>
<td>1.0.6.RELEASE</td>
<td>1.1.5.RELEASE</td>
<td>1.2.0.M1</td>
<td>1.2.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-commons</td>
<td>1.0.5.RELEASE</td>
<td>1.1.1.RELEASE</td>
<td>1.1.1.RELEASE</td>
<td>1.1.2.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-contract</td>
<td></td>
<td></td>
<td>1.0.0.M2</td>
<td>1.0.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-config</td>
<td>1.0.4.RELEASE</td>
<td>1.1.3.RELEASE</td>
<td>1.2.0.M1</td>
<td>1.2.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-netflix</td>
<td>1.0.7.RELEASE</td>
<td>1.1.5.RELEASE</td>
<td>1.2.0.M1</td>
<td>1.2.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-security</td>
<td>1.0.3.RELEASE</td>
<td>1.1.2.RELEASE</td>
<td>1.1.2.RELEASE</td>
<td>1.1.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-starters</td>
<td>1.0.6.RELEASE               </td>
</tr>
<tr>
<td>spring-cloud-cloudfoundry</td>
<td></td>
<td>1.0.0.RELEASE</td>
<td>1.0.0.RELEASE</td>
<td>1.0.1.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-cluster</td>
<td></td>
<td>1.0.1.RELEASE          </td>
</tr>
<tr>
<td>spring-cloud-consul</td>
<td></td>
<td>1.0.2.RELEASE</td>
<td>1.1.0.M1</td>
<td>1.1.0.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-sleuth</td>
<td></td>
<td>1.0.6.RELEASE</td>
<td>1.0.6.RELEASE</td>
<td>1.0.7.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-stream</td>
<td></td>
<td>1.0.2.RELEASE</td>
<td>Brooklyn.M1</td>
<td>Brooklyn.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-cloud-zookeeper</td>
<td></td>
<td>1.0.2.RELEASE</td>
<td>1.0.2.RELEASE</td>
<td>1.0.3.BUILD-SNAPSHOT</td>
</tr>
<tr>
<td>spring-boot</td>
<td>1.2.8.RELEASE</td>
<td>1.3.7.RELEASE</td>
<td>1.4.0.RELEASE</td>
<td>1.4.0.RELEASE</td>
</tr>
<tr>
<td>spring-cloud-task</td>
<td></td>
<td>1.0.2.RELEASE</td>
<td>1.0.2.RELEASE</td>
<td>1.0.3.BUILD-SNAPSHOT</td>
</tr>
</tbody>
</table>
<p>Text to ASCII Art Generator</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/framework/">framework</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/cloud/">cloud</a><a href="/tags/spring-cloud/">spring cloud</a><a href="/tags/spirng/">spirng</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/01/zabbix官方文档阅读/" title="zabbix教程   --- 官方文档笔记" itemprop="url">zabbix教程   --- 官方文档笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2017-11-01T12:10:33.000Z" itemprop="datePublished"> Published 2017-11-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="ZABBIX官方文档阅读"><a href="#ZABBIX官方文档阅读" class="headerlink" title="ZABBIX官方文档阅读"></a>ZABBIX官方文档阅读</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol>
<li><p>安装配置包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http://repo.zabbix.com/zabbix/3.2/rhel/7/x86_64/zabbix-release-3.2-1.el7.noarch.rpm</span><br><span class="line">yum -y install zabbix-agent</span><br><span class="line">yum -y install zabbix-server-mysql.x86_64</span><br><span class="line">yum -y install zabbix-web-mysql.noarch</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化mysql数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">create database zabbix;</span><br><span class="line">CREATE USER &apos;zabbix&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;zabbix&apos;;</span><br><span class="line">GRANT all ON zabbix.* TO &apos;zabbix&apos;;</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">cd /usr/share/doc/zabbix-server-mysql-3.2.0</span><br><span class="line"></span><br><span class="line">create database zabbix</span><br><span class="line">zcat create.sql.gz | mysql -uroot zabbix</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑数据库配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/zabbix/zabbix_server.conf</span><br><span class="line">DBHost=localhost</span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=zabbix</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start zabbix-server</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑PHP配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</span><br><span class="line">yum -y install --enablerepo=remi --enablerepo=remi-php56 php php-opcache php-devel php-mbstring php-mcrypt php-mysqlnd php-phpunit-PHPUnit php-pecl-xdebug php-pecl-xhprof  php-bcmath php-gd</span><br><span class="line"></span><br><span class="line">vi /etc/php.ini</span><br><span class="line">php_value max_execution_time 300</span><br><span class="line">php_value memory_limit 128M</span><br><span class="line">php_value post_max_size 16M</span><br><span class="line">php_value upload_max_filesize 2M</span><br><span class="line">php_value max_input_time 300</span><br><span class="line">php_value always_populate_raw_post_data -1</span><br><span class="line"># php_value date.timezone Asia/ShangHai</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动httpd服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.zabbix.com/downloads/nightly/pre-zabbix-3.2.8rc1-70360.tar.gz</span><br><span class="line">tar -xvf pre-zabbix-3.2.8rc1-70360.tar.gz</span><br><span class="line">cd zabbix-3.2.8rc1/frontends/</span><br><span class="line">mv php zabbix</span><br><span class="line">cp -r php /var/www/html</span><br><span class="line">vi /var/www/html/zabbix/conf/zabbix.conf.php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">// Zabbix GUI configuration file.</span><br><span class="line">global $DB;</span><br><span class="line"></span><br><span class="line">$DB[&apos;TYPE&apos;]     = &apos;MYSQL&apos;;</span><br><span class="line">$DB[&apos;SERVER&apos;]   = &apos;localhost&apos;;</span><br><span class="line">$DB[&apos;PORT&apos;]     = &apos;0&apos;;</span><br><span class="line">$DB[&apos;DATABASE&apos;] = &apos;zabbix&apos;;</span><br><span class="line">$DB[&apos;USER&apos;]     = &apos;zabbix&apos;;</span><br><span class="line">$DB[&apos;PASSWORD&apos;] = &apos;zabbix&apos;;</span><br><span class="line"></span><br><span class="line">// Schema name. Used for IBM DB2 and PostgreSQL.</span><br><span class="line">$DB[&apos;SCHEMA&apos;] = &apos;&apos;;</span><br><span class="line"></span><br><span class="line">$ZBX_SERVER      = &apos;localhost&apos;;</span><br><span class="line">$ZBX_SERVER_PORT = &apos;10051&apos;;</span><br><span class="line">$ZBX_SERVER_NAME = &apos;zabbix&apos;;</span><br><span class="line"></span><br><span class="line">$IMAGE_FORMAT_DEFAULT = IMAGE_FORMAT_PNG;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>查看启动日志<code>tail -200f /var/log/zabbix/zabbix_server.log</code></p>
<ol>
<li><p>访问地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://ip/zabbix</span><br><span class="line">用户名: admin</span><br><span class="line">密码:   zabbix</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置agent</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line">vi /etc/zabbix/zabbix-agentd.conf</span><br><span class="line">Server=192.168.181.100</span><br><span class="line">ServerActive=192.168.181.100</span><br><span class="line">HostMetadataItem=system.uname</span><br><span class="line">HostnameItem=system.hostname</span><br><span class="line">注释掉</span><br><span class="line">#Hostname=Zabbix server</span><br></pre></td></tr></table></figure></li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/运维/">运维</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/cloud/">cloud</a><a href="/tags/zabbix/">zabbix</a><a href="/tags/monitro/">monitro</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/01/ansible_doc/" title="ansible教程   --- 官方文档笔记" itemprop="url">ansible教程   --- 官方文档笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2017-11-01T12:10:33.000Z" itemprop="datePublished"> Published 2017-11-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="ansible官方文档学习"><a href="#ansible官方文档学习" class="headerlink" title="ansible官方文档学习"></a>ansible官方文档学习</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol>
<li><p>安装EPLE</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装ansible</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ansible</span><br><span class="line">yum -y install libselinux-python -y   [目标机器上安装]</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置ssh免登陆<br>3.1 生成SSH公钥私钥，生成的文件位于~/.ssh/下有id_rsa和id_rsa.pub</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -P</span><br></pre></td></tr></table></figure>
<p>3.2 将<code>id_rsa.pub</code>复制到要免密码登陆的机器的<code>authorized_keys</code>文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp .ssh/id_rsa.pub name@host:/xxx/xxx/id_rsa.pub </span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class="line">chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h2><ol>
<li><p>编辑<code>/etc/ansible/hosts</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ansible/hosts</span><br><span class="line">添加</span><br><span class="line">192.168.181.201</span><br><span class="line">192.168.181.202</span><br></pre></td></tr></table></figure>
</li>
<li><p>为了防止重复输入密码，执行以下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-agent bash</span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible all -m ping</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Inventory文件"><a href="#Inventory文件" class="headerlink" title="Inventory文件"></a>Inventory文件</h2><ol>
<li>Ansible 可同时操作属于一个组的多台主机,组和主机之间的关系通过 inventory 文件配置. 默认的文件路径为 /etc/ansible/hosts</li>
<li><p>格式  中括号中为组名 可以明确指明端口号 支持通配符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mail.example.com</span><br><span class="line"></span><br><span class="line">[webservers]</span><br><span class="line">foo.example.com</span><br><span class="line">bar.example.com</span><br><span class="line"></span><br><span class="line">[dbservers]</span><br><span class="line">one.example.com</span><br><span class="line">two.example.com</span><br><span class="line">badwolf.example.com:5309</span><br><span class="line">www[01:50].example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>主机变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1 http_port=80 maxRequestsPerChild=808</span><br><span class="line">host2 http_port=303 maxRequestsPerChild=909</span><br></pre></td></tr></table></figure>
</li>
<li><p>组的变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1</span><br><span class="line">host2</span><br><span class="line"></span><br><span class="line">[atlanta:vars]</span><br><span class="line">ntp_server=ntp.atlanta.example.com</span><br><span class="line">proxy=proxy.atlanta.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>把一个组作为另一个组的子成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1</span><br><span class="line">host2</span><br><span class="line"></span><br><span class="line">[raleigh]</span><br><span class="line">host2</span><br><span class="line">host3</span><br><span class="line"></span><br><span class="line">[southeast:children]</span><br><span class="line">atlanta</span><br><span class="line">raleigh</span><br><span class="line"></span><br><span class="line">[southeast:vars]</span><br><span class="line">some_server=foo.southeast.example.com</span><br><span class="line">halon_system_timeout=30</span><br><span class="line">self_destruct_countdown=60</span><br><span class="line">escape_pods=2</span><br><span class="line"></span><br><span class="line">[usa:children]</span><br><span class="line">southeast</span><br><span class="line">northeast</span><br><span class="line">southwest</span><br><span class="line">northwest</span><br></pre></td></tr></table></figure>
</li>
<li><p>分文件定义 Host 和 Group 变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/ansible/group_vars/raleigh</span><br><span class="line">/etc/ansible/group_vars/webservers</span><br><span class="line">/etc/ansible/host_vars/foosball</span><br></pre></td></tr></table></figure>
</li>
<li><p>Inventory 参数的说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ansible_ssh_host</span><br><span class="line">  将要连接的远程主机名.与你想要设定的主机的别名不同的话,可通过此变量设置.</span><br><span class="line"></span><br><span class="line">ansible_ssh_port</span><br><span class="line">  ssh端口号.如果不是默认的端口号,通过此变量设置.</span><br><span class="line"></span><br><span class="line">ansible_ssh_user</span><br><span class="line">  默认的 ssh 用户名</span><br><span class="line"></span><br><span class="line">ansible_ssh_pass</span><br><span class="line">  ssh 密码(这种方式并不安全,我们强烈建议使用 --ask-pass 或 SSH 密钥)</span><br><span class="line"></span><br><span class="line">ansible_sudo_pass</span><br><span class="line">  sudo 密码(这种方式并不安全,我们强烈建议使用 --ask-sudo-pass)</span><br><span class="line"></span><br><span class="line">ansible_sudo_exe (new in version 1.8)</span><br><span class="line">  sudo 命令路径(适用于1.8及以上版本)</span><br><span class="line"></span><br><span class="line">ansible_connection</span><br><span class="line">  与主机的连接类型.比如:local, ssh 或者 paramiko. Ansible 1.2 以前默认使用 paramiko.1.2 以后默认使用 &apos;smart&apos;,&apos;smart&apos; 方式会根据是否支持 ControlPersist, 来判断&apos;ssh&apos; 方式是否可行.</span><br><span class="line"></span><br><span class="line">ansible_ssh_private_key_file</span><br><span class="line">  ssh 使用的私钥文件.适用于有多个密钥,而你不想使用 SSH 代理的情况.</span><br><span class="line"></span><br><span class="line">ansible_shell_type</span><br><span class="line">  目标系统的shell类型.默认情况下,命令的执行使用 &apos;sh&apos; 语法,可设置为 &apos;csh&apos; 或 &apos;fish&apos;.</span><br><span class="line"></span><br><span class="line">ansible_python_interpreter</span><br><span class="line">  目标主机的 python 路径.适用于的情况: 系统中有多个 Python, 或者命令路径不是&quot;/usr/bin/python&quot;,比如  \*BSD, 或者 /usr/bin/python</span><br><span class="line">  不是 2.X 版本的 Python.我们不使用 &quot;/usr/bin/env&quot; 机制,因为这要求远程用户的路径设置正确,且要求 &quot;python&quot; 可执行程序名不可为 python以外的名字(实际有可能名为python26).</span><br><span class="line"></span><br><span class="line">  与 ansible_python_interpreter 的工作方式相同,可设定如 ruby 或 perl 的路径....</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h2><ol>
<li>使用 Ansible 要加上 <code>-i</code> 选项 （例如:<code>-i/etc/ansible/cobbler.py</code>）<code>.cobbler.py</code>这个脚本使用 Cobbler 的 XMLRPC API 与 Cobbler 通信.</li>
</ol>
<h2 id="命令详解"><a href="#命令详解" class="headerlink" title="命令详解"></a>命令详解</h2><ol>
<li><p>ansible <pattern_goes_here> -m <module_name> -a <arguments></arguments></module_name></pattern_goes_here></p>
<p>1.1 pattern 通常关联到一系列组(主机的集合) –如上示例中,所有的主机均在 “webservers” 组中.<br>1.2 支持并集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webservers:dbservers</span><br></pre></td></tr></table></figure>
<p>1.2 支持交集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webservers:!phoenix</span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ol>
<h2 id="ad-hoc"><a href="#ad-hoc" class="headerlink" title="ad-hoc"></a>ad-hoc</h2><pre><code>如果我们敲入一些命令去比较快的完成一些事情,而不需要将这些执行的命令特别保存下来, 这样的命令就叫做 ad-hoc 命令.
</code></pre><ol>
<li>command 模块不支持</li>
<li></li>
</ol>
<h2 id="module"><a href="#module" class="headerlink" title="module"></a>module</h2><h3 id="Packaging-Modules"><a href="#Packaging-Modules" class="headerlink" title="Packaging Modules"></a>Packaging Modules</h3><ol>
<li>作用<blockquote>
<p>  注册 升级 移除 和列出包名 组名</p>
</blockquote>
</li>
<li>核心参数<blockquote>
<p>  name    名称<br>  state   安装 (present or installed, latest), 移除 (absent or removed)</p>
</blockquote>
</li>
<li>示例<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- name: 安装最新版本的apache</span><br><span class="line">  yum: name=httpd state=latest</span><br><span class="line"></span><br><span class="line">- name: 移除apache</span><br><span class="line">  yum: name=httpd state=absent</span><br><span class="line"></span><br><span class="line">- name: 安装一个特殊版本的apache</span><br><span class="line">  yum: name=httpd-2.2.29-1.4.amzn1 state=present</span><br><span class="line"></span><br><span class="line">- name: 升级所有的软件包</span><br><span class="line">  yum: name=* state=latest</span><br><span class="line"></span><br><span class="line">- name: 从一个远程yum仓库安装nginx</span><br><span class="line">  yum: name=http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present</span><br><span class="line"></span><br><span class="line">- name: 从本地仓库安装nginx</span><br><span class="line">  yum: name=/usr/local/src/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present</span><br><span class="line"></span><br><span class="line">- name: 安装整个Development tools相关的软件包</span><br><span class="line">  yum: name=&quot;@Development tools&quot; state=present</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="常用模块"><a href="#常用模块" class="headerlink" title="常用模块"></a>常用模块</h2><ol>
<li>file</li>
<li>shell</li>
<li>copy</li>
<li>yum</li>
<li>user</li>
<li>cron</li>
<li>group</li>
<li>service</li>
<li>script</li>
<li>ping</li>
<li>command</li>
<li>raw</li>
<li>get_url</li>
<li>synchronize</li>
</ol>
<h2 id="Playbooks"><a href="#Playbooks" class="headerlink" title="Playbooks"></a>Playbooks</h2><h2 id="ansible-tower"><a href="#ansible-tower" class="headerlink" title="ansible tower"></a>ansible tower</h2><ol>
<li>安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://releases.ansible.com/ansible-tower/setup-bundle/ansible-tower-setup-bundle-latest.el6.tar.gz</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ol>
<li>target uses selinux but python bindings (libselinux-python) aren’t installed!</li>
<li>为了确保连接ansible的顺利执行，需要在ansible的配置文件中添加忽略keys检查的配置，ansible的配置文件默认在<br>/etc/ansible/ansible.cfg。在该文件中添加如下语句即可。</li>
</ol>
<p>host_key_checking = False</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/运维/">运维</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ansible/">ansible</a><a href="/tags/doc/">doc</a><a href="/tags/运维/">运维</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/01/consul nomad vagrant 安装/" title="nomad教程   --- 官方文档笔记" itemprop="url">nomad教程   --- 官方文档笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="你家亮哥" target="_blank" itemprop="author">你家亮哥</a>
		
  <p class="article-time">
    <time datetime="2017-11-01T12:10:33.000Z" itemprop="datePublished"> Published 2017-11-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="nomad-安装"><a href="#nomad-安装" class="headerlink" title="nomad 安装"></a>nomad 安装</h1><ol>
<li><p>下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> wget https://releases.hashicorp.com/nomad/0.7.0/nomad_0.7.0_linux_amd64.zip?_ga=2.16387188.338572034.1510226346-180435925.1501246072</span><br><span class="line"> </span><br><span class="line">mv nomad_0.7.0_linux_amd64.zip?_ga=2.16387188.338572034.1510226346-180435925.1501246072 nomad.zip</span><br><span class="line">unzip nomad.zip</span><br><span class="line">chmod +x nomad</span><br><span class="line">mv nomad /usr/local/bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /tools/nomad/config</span><br><span class="line">mkdir -p /data/nomad</span><br><span class="line"></span><br><span class="line">配置server</span><br><span class="line"></span><br><span class="line">vi /tools/nomad/config/server.hcl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Increase log verbosity</span><br><span class="line">log_level = &quot;DEBUG&quot;</span><br><span class="line"></span><br><span class="line"># Setup data dir</span><br><span class="line">data_dir = &quot;/data/nomad/server1&quot;</span><br><span class="line"></span><br><span class="line"># Enable the server</span><br><span class="line">server &#123;</span><br><span class="line">    enabled = true</span><br><span class="line"></span><br><span class="line">    # Self-elect, should be 3 or 5 for production</span><br><span class="line">    bootstrap_expect = 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">配置client</span><br><span class="line"></span><br><span class="line">vi /tools/nomad/config/client.hcl</span><br><span class="line"></span><br><span class="line"># Increase log verbosity</span><br><span class="line">log_level = &quot;INFO&quot;</span><br><span class="line"></span><br><span class="line"># Setup data dir</span><br><span class="line">data_dir = &quot;/data/nomad/client1&quot;</span><br><span class="line"></span><br><span class="line"># Enable the client</span><br><span class="line">client &#123;</span><br><span class="line">    enabled = true</span><br><span class="line"></span><br><span class="line">    # For demo assume we are talking to server1. For production,</span><br><span class="line">    # this should be like &quot;nomad.service.consul:4647&quot; and a system</span><br><span class="line">    # like Consul used for service discovery.</span><br><span class="line">    servers = [&quot;127.0.0.1:4647&quot;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Modify our port to avoid a collision with server1</span><br><span class="line">ports &#123;</span><br><span class="line">    http = 5656</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup nomad agent -config /tools/nomad/config/server.hcl 1&gt;/data/nomad/server.log 2&gt;&amp;1 &amp;</span><br><span class="line">nohup nomad agent -config /tools/nomad/config/client.hcl 1&gt;/data/nomad/client.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nomad agent-info</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="consul安装"><a href="#consul安装" class="headerlink" title="consul安装"></a>consul安装</h1><ol>
<li><p>下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://releases.hashicorp.com/consul/1.0.0/consul_1.0.0_linux_amd64.zip?_ga=2.16525172.338572034.1510226346-180435925.1501246072</span><br><span class="line">mv consul_1.0.0_linux_amd64.zip?_ga=2.16525172.338572034.1510226346-180435925.1501246072 consul.zip</span><br><span class="line">unzip consul.zip</span><br><span class="line">chomd +x consul </span><br><span class="line">mv consul /usr/local/bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /tools/consul/config</span><br><span class="line">mkdir -p /data/consul</span><br><span class="line">vi /tools/consul/config/server.json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;datacenter&quot;: &quot;dc1&quot;,</span><br><span class="line">  &quot;data_dir&quot;: &quot;/data/consul&quot;,</span><br><span class="line">  &quot;log_level&quot;: &quot;INFO&quot;,</span><br><span class="line">  &quot;node_name&quot;: &quot;tencent&quot;,</span><br><span class="line">  &quot;server&quot;: true,</span><br><span class="line">  &quot;bootstrap&quot;: true,</span><br><span class="line">  &quot;ui&quot;: true,</span><br><span class="line">  &quot;client_addr&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">  &quot;bind_addr&quot;: &quot;172.27.0.8&quot;,</span><br><span class="line">  &quot;telemetry&quot;: &#123;</span><br><span class="line">     &quot;statsite_address&quot;: &quot;127.0.0.1:2180&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup consul agent --config-dir=/tools/consul/config/server.json &gt; /data/consul/consul.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">consul members</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="常用镜像"><a href="#常用镜像" class="headerlink" title="常用镜像"></a>常用镜像</h1><p>Docker privileged mode is disabled on this Nomad agent<br>Nomad client配置privilege</p>
<p>Failed to create container: no such image<br>检查网络模式是否配置正确 network_mode</p>
<p> Docker container exited with non-zero exit code: 255<br> 通过命令检查错误日志<br> nomad logs  -stderr 236459a7 pilot_task</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/tools/">tools</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/nomad/">nomad</a><a href="/tags/consul/">consul</a><a href="/tags/dev-ops/">dev ops</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/4/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/cloud/" title="cloud">cloud<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/tools/cloud/" title="cloud">cloud<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/framework/" title="framework">framework<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/framwwork/" title="framwwork">framwwork<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/tools/" title="tools">tools<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/运维/" title="运维">运维<sup>6</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/运维/" title="运维">运维<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/doc/" title="doc">doc<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/cloud/" title="cloud">cloud<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/dev-ops/" title="dev ops">dev ops<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/ansible/" title="ansible">ansible<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/consul/" title="consul">consul<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/spring-boot/" title="spring boot">spring boot<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/kubernetes/" title="kubernetes">kubernetes<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ReactiveX/" title="ReactiveX">ReactiveX<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/framework/" title="framework">framework<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/docker-compose/" title="docker compose">docker compose<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/dockerfile/" title="dockerfile">dockerfile<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/spring-cloud/" title="spring cloud">spring cloud<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/spirng/" title="spirng">spirng<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/cache/" title="cache">cache<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/nomad/" title="nomad">nomad<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/zabbix/" title="zabbix">zabbix<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/monitro/" title="monitro">monitro<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/elastic-search/" title="elastic search">elastic search<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m immerser. <br/>
			This is my blog,study with me.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="你家亮哥">你家亮哥</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
